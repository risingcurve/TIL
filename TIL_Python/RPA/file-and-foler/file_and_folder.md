1) 경로(path)와 디렉토리(directory)
오늘 배울 내용은 바로 경로(path)와 디렉토리(directory)입니다.

자세한 내용으로 들어가기 전에 경로와 디렉토리가 각각 무엇이고, 왜 배워야하는지에 대해 간단히 설명드려보겠습니다.

1. 경로와 디렉토리의 개념


일상 생활에서 경로란 어떤 목적지로 향하는 길이라는 의미로 쓰입니다.

컴퓨터에서 목적지란 디렉토리이며, 찾아가는 길을 경로라고 부릅니다. 우리에게 아주 익숙한 폴더라는 것이 디렉토리라 불리는 것입니다.

참고로 경로는 폴더 뿐만 아니라 파일로 향하는 길을 이르기도 합니다.

이때의 경로는 디렉토리 안의 디렉토리 안의 디렉토리 안의 파일 정도가 되겠죠?

실제 모습은 흔히 보셨겠지만 C:\Users\username\Desktop\filename.txt 이런 식입니다.

참고로, Windows os는 디렉토리를 역슬레쉬( \ )로 나타내고, Mac os에서는 슬레쉬( / )로 나타냅니다.



프로그래밍 공부를 하다보면, 한번쯤 겪게 되는 경로 설정의 오류는 '경로가 없거나 경로가 올바르지 않게 입력되었을 때' 생깁니다.

즉, 여기 어떤 파일이 있다고 코드에 잘 적어놓지 않았거나, 그 경로를 따라 갔더니 찾는 파일이 존재하지 않거나 하는 경우입니다.

추후에 프로그램을 자신의 컴퓨터에서 만들어서, 다른 사람에게 배포할 때에도 경로에 대한 고려가 꼭 필요하답니다.

내 컴퓨터에서 실컷 잘돌아가다가도 경로 설정을 신경쓰지 못 하면 다른 컴퓨터에서는 쓸모가 없어지니까요!

2. 절대 경로와 상대 경로


좌표계에도 절대 좌표와 상대 좌표가 있듯이 경로에도 절대 경로와 상대 경로가 있습니다.

1) 절대 경로
절대적인 기준(최초 디렉토리)를 기준으로 경유한 경로를 모두 기입하는 방식입니다.

아까 전 예로 들었던 C:\Users\username\Desktop\filename.txt 가 절대 경로입니다.

2) 상대 경로
상대 경로는 최초 디렉토리가 아닌 특정 경로를 기준으로 다른 경로를 표시하는 방식입니다.

주로 현재 작업하고 있는 폴더를 기준으로 합니다.



상대 경로 사용법

예를 들어 현재 디렉토리에서 제가 example.py라는 파이썬 파일에 코드를 짜고 있다고 생각해봅시다.코드를 짜다보니 하위 디렉토리에 위치하는 sample.xlsx를 참조해야하는 상황이 발생했습니다.

이때 상대 경로의 개념을 이용하면 ./하위 디렉토리/sample.xlsx 라고 써주면 됩니다. 즉, 여기서 사용된 dot(.)은 현재 디렉토리가 어디에 위치하던 현재 파이썬 파일이 위치한 디렉토리의 경로를 뜻합니다. 여기서는 dot(.)의 의미는 '최초 디렉토리/상위 디렉토리/현재 디렉토리'가 되겠죠!

추가적으로 설명드리면, dot 두 개(..)는 현재 디렉토리의 상위 디렉토리를 뜻합니다.

만약 example.py에서 sample2.xlsx를 상대 경로를 이용해서 참조하고 싶다면 이렇게 하시면 됩니다.

'./../현재 디렉토리와 같은 디렉토리에 존재/sample2.xlsx'

그러니깐, 현재 경로(.)를 기준으로 상위 디렉토리(/..)로 올라간 후, '현재 디렉토리와 같은 디렉토리에 존재'라 이름 붙인 디렉토리로 내려가서 sample2.xlsx를 참조하는 것입니다.

상대 경로 사용하는 이유

그렇다면 절대 경로도 있는데 왜 굳이 상대 경로는 왜 사용하는걸까요?

예를들어 filename.txt의 경로가 자주 바뀌거나 최초 디렉토리가 서로 다른 Windows와 Mac OS 모두에서 작동해야 하는 프로그램을 만드는 경우엔 그때 그때 경로를 다시 작성하거나 OS 별로 따로 관리해야 하는 것은 너무 비효율적인 일입니다.

그래서 이럴 때는 절대 경로가 아닌 상대 경로를 이용해 주어야 합니다.

절대 경로 가져오는 꿀팁

window는 cmd, mac은 terminal에 경로가 필요한 파일이나 폴더를 드래그해서 가져다 놓으시면 됩니다.

만약 vscode와 같은 ide를 사용하시면 그 곳의 터미널 창에다가 끌어다 놓으셔도 되니깐 유용하게 사용하시면 좋겠습니다.


2) 절대 경로와 상대 경로
좌표계에도 절대 좌표와 상대 좌표가 있듯이 경로에도 절대 경로와 상대 경로가 있습니다.



1. 절대 경로
절대적인 기준(최초 디렉토리)를 기준으로 경유한 경로를 모두 기입하는 방식입니다.

Ex) C:\Users\username\Desktop\filename.txt

2. 상대 경로
상대 경로는 최초 디렉토리가 아닌 특정 경로를 기준으로 다른 경로를 표시하는 방식입니다.

주로 현재 작업하고 있는 폴더를 기준으로 합니다.



1) 상대 경로 사용법
예를 들어 현재 디렉토리에서 제가 example.py라는 파이썬 파일에 코드를 짜고 있다고 생각해봅시다.코드를 짜다보니 하위 디렉토리에 위치하는 sample.xlsx를 참조해야하는 상황이 발생했습니다.

이때 상대 경로의 개념을 이용하면 ./하위 디렉토리/sample.xlsx 라고 써주면 됩니다. 즉, 여기서 사용된 dot(.)은 현재 디렉토리가 어디에 위치하던 현재 파이썬 파일이 위치한 디렉토리의 경로를 뜻합니다. 여기서는 dot(.)의 의미는 '최초 디렉토리/상위 디렉토리/현재 디렉토리'가 되겠죠!

추가적으로 설명드리면, dot 두 개(..)는 현재 디렉토리의 상위 디렉토리를 뜻합니다.

만약 example.py에서 sample2.xlsx를 상대 경로를 이용해서 참조하고 싶다면 이렇게 하시면 됩니다.

'./../현재 디렉토리와 같은 디렉토리에 존재/sample2.xlsx'

그러니깐, 현재 경로(.)를 기준으로 상위 디렉토리(/..)로 올라간 후, '현재 디렉토리와 같은 디렉토리에 존재'라 이름 붙인 디렉토리로 내려가서 sample2.xlsx를 참조하는 것입니다.

2) 상대 경로 사용하는 이유
그렇다면 절대 경로도 있는데 왜 굳이 상대 경로는 왜 사용하는걸까요?

예를들어 filename.txt의 경로가 자주 바뀌거나 최초 디렉토리가 서로 다른 Windows와 Mac OS 모두에서 작동해야 하는 프로그램을 만드는 경우엔 그때 그때 경로를 다시 작성하거나 OS 별로 따로 관리해야 하는 것은 너무 비효율적인 일입니다.

그래서 이럴 때는 절대 경로가 아닌 상대 경로를 이용해 주어야 합니다.

3) 절대 경로 가져오는 꿀팁
window는 cmd, mac은 terminal에 경로가 필요한 파일이나 폴더를 드래그해서 가져다 놓으시면 됩니다.

만약 vscode와 같은 ide를 사용하시면 그 곳의 터미널 창에다가 끌어다 놓으셔도 되니깐 유용하게 사용하시면 좋겠습니다.

3) os 모듈
1. os 모듈 불러오기
os 모듈은 기본적으로 설치되어 있는 파이썬 내장 라이브러리에 포함된 모듈입니다. 참고로 파이썬 내장 라이브러리에는 우리가 자주 사용하는 sys, time, random 모듈도 있답니다.

이미 설치되어 있기에 간단하게 import 해주면 되겠습니다.

import os
2. os 모듈의 함수들
아래의 os 모듈 공식 문서를 보시면 os 모듈에는 정말 많은 함수들이 내장되어 있습니다.

https://docs.python.org/ko/3/library/os.html

수 십 가지의 함수를 모두 공부하는 것은 너무나도 비효율적인 일이니, 제가 생각하기에 가장 많이 쓸만한 함수만 골라서 알려드리겠습니다.

1) os.getcwd( )
현재 작업중인 경로를 문자열로 돌려주는 getcwd( ) 함수입니다. 저의 경우는 실행한 파이썬 파일이 위치한 VSCODE BASIC이라는 디렉토리(폴더)의 경로를 출력해주는 것을 확인할 수 있습니다.

print(os.getcwd())

<결과>
>>> /Users/sangwoo/Desktop/VSCODE BASIC
2) os.mkdir( )
괄호 안에 '원하는 경로' + '/새로운 디렉토리'를 써주면 새로운 디렉토리가 생겨납니다. 만약 이미 있는 디렉토리를 생성해주려고 하면 에러가 발생하니 주의하세요.

os.mkdir("/Users/sangwoo/Desktop/test_mkdir")
<결과>



3) os.makedirs( )
os.mkdir( )과 비슷하지만 조금 다릅니다. 뭐랄까.. 디렉토리를 연달아서 적어주면 줄줄이 소세지 처럼 디렉토리가 생성됩니다.

os.mkdir("/Users/sangwoo/Desktop/test_mkdir/a/b/c")
<결과>



4) os.listdir( )
정말 많이 사용하는 함수인 해당 경로에 위치하는 파일, 디렉토리 이름(확장자 포함)을 리스트로 돌려주는 함수입니다.

# os.listdir("/디렉토리")

# 현재 작업 경로에 있는 파일, 디렉토리 리스트 얻기
print(os.listdir(os.getcwd()))
좌측의 실제 디렉토리 목록들이 터미널에 출력되는 것을 보실 수 있습니다. 가만보니 .DS_Store라는 이상한 친구가 끼어 있는데 뭔지 나중에 알아봐야겠네요.



5) os.chdir( )
원하는 경로를 현재 작업 경로로 변환해주는 함수입니다. 함수를 사용하기 전과 후의 경로 차이가 나는 것을 확인할 수 있습니다.

print(os.getcwd())
os.chdir("/Users/sangwoo/Desktop/")
print(os.getcwd())

<결과>
>>> /Users/sangwoo/Desktop/RPA BASIC
>>> /Users/sangwoo/Desktop
6) os.removedirs( )
함수 이름에서 알 수 있듯이 디렉토리를 제거하는 함수입니다. 만들 때와 같이 제거하고자 하는 디렉토리의 경로를 써주시면 됩니다.

만약 경로가 열려있거나 존재하지 않으면 에러가 발생하니 주의하세요.

os.removedirs("/Users/sangwoo/Desktop/test_mkdir/a/b/c")
<결과>



7) os.remove( ) / os.unlink( )
위의 removedirs( ) 함수가 디렉토리를 삭제하는 함수였다면 이 함수는 파일을 삭제하는 함수입니다. 두 함수 모두 같은 기능을 합니다.

os.remove("/Users/sangwoo/Desktop/test_mkdir/a/b/ex_hello.py")
<결과>

ex_hello.py 사라짐. (귀찮아서 결과 사진 안올린거 아님.. 암튼 아님..)

8) os.rename(path 1, path 2)
파일의 이름을 바꿔주는 함수입니다. 기존 파일의 경로와 바꾸고자 하는 파일명이 들어간 경로를 차례대로 써주시면 되겠습니다.



4) glob 모듈
glob 모듈은 패턴을 사용하여 현재 폴더(디렉토리)는 물론 하위 경로의 파일들을 검색할 때 사용합니다.

1. 모듈 불러오기
glob 모듈을 불러오는 방법은 다음과 같습니다.

import glob
2. 모듈 사용법
glob 모듈을 불러왔으니 이제 사용법을 알아보겠습니다.

복잡했던 os 모듈과 다르게 glob 모듈은 함수 하나만 알아두시면 됩니다. 바로 glob 함수입니다. 말장난 같지만 glob.glob( )로 사용한답니다.

# 확장자를 정하지 않으려면 '경로/*.*'로 입력해주면 됨

glob.glob('참조하길 원하는 폴더의 경로/*.확장자')
간단한 예시로 원하는 폴더의 모든 jpg 파일을 찾아서 리스트로 받아보겠습니다.

참조하려는 폴더는 아래와 같이 jpg 파일이 10개 들어있는 폴더입니다.



import glob

list_filepath = glob.glob('/Users/sangwoo/Desktop/img_download/*.jpg')

for filepath in list_filepath:
    print(filepath)
<실행 결과>

enter image description here

하위 폴더까지 참조하고 싶을 때
다시 우리가 참조한 폴더를 잘 살펴보면 하위 폴더에 jpg 파일이 10개 더 들어있음에도 딱 해당 폴더까지만 참조하고 더이상 가져오지 않은 것을 확인 하실 수 있습니다.

만약 하위 폴더까지 모두 참조하고 싶을 때는 아래와 같이 코딩 해주셔야합니다.

import glob

list_filepath = glob.glob('/Users/sangwoo/Desktop/img_download/**/*.jpg', recursive=True)

for filepath in list_filepath:
    print(filepath)
여기서 주의할 점은 꼭 recursive=True를 넣어주셔야 한다는 것입니다!

이걸 안넣어주고 단순히 파일경로/**/*/jpg로 하시면 하위 폴더만 참조하게 됩니다.


5) shutil 모듈
오늘은 파일과 폴더를 이동하거나 복사하고 싶을 때 사용하는 shutil 모듈에 대해서 공부해 보겠습니다.

1. 모듈 불러오기
우선 shutil 모듈은 따로 설치할 필요가 없이 바로 import 해주시면 됩니다. 지난 시간에 배웠던 os 모듈과 같이 파이썬 내장 라이브러리에 포함되어 있는 모듈이기 때문입니다.

import shutil
2. 파일을 특정 폴더로 이동하기_move( )


1) 상대경로 방식
# 방법 1 - 파일과 폴더가 현재 작업경로에 있는 경우만 가능
shutil.move('이동시킬 파일명.확장자', '파일을 이동시킬 폴더명')

# 예시
shutil.move('Test.xlsx', '테스트 폴더')
2) 절대경로 방식
# 방법 2 - 현재 작업경로와 상관없이 절대경로를 입력
shutil.move('이동시킬 파일 경로', '파일을 이동시킬 폴더의 경로')

# 예시
shutil.move('/Users/sangwoo/Desktop/PYTHON BASIC/Shutil Basic/Test.xlsx',
            '/Users/sangwoo/Desktop/PYTHON BASIC/Shutil Basic/테스트 폴더')
아래부터는 간결한 글을 위해서 상대 경로 방식으로만 코드를 작성하였으나, 위와 동일하게 절대경로 방식또한 가능한 점 참고해주세요.

3. 폴더를 특정 폴더로 이동하기_move( )
파일과 마찬가지로 폴더도 이동시킬 수 있습니다. 이때 폴더 안의 모든 내용물이 함께 이동됩니다.

1) 폴더가 존재하는 경우


# 방법 1 - 파일과 폴더가 현재 작업경로에 있는 경우만 가능
shutil.move('이동시킬 폴더명', '이동할 폴더를 담을 폴더명')

# 예시
shutil.move('테스트 폴더', '테스트 폴더2')
2) 폴더가 존재하지 않는 경우
코드는 동일하지만 그 결과가 다릅니다. 만약 '테스트 폴더2'가 없는 경우, 기존의 '테스트 폴더'의 이름에 2가 추가되면서 안에는 'Test.xlsx' 파일이 위치하게 됩니다.



4. 파일을 특정 폴더로 복사하기_copy( )


# 방법 1 - 파일과 폴더가 현재 작업경로에 있는 경우만 가능
shutil.copy('복사할 파일명.확장자', '복사한 파일을 담을 폴더명')

# 예시
shutil.copy('Test.xlsx', '테스트 폴더')
5. 폴더를 특정 폴더로 복사하기_copytree( )


# 방법 1 - 파일과 폴더가 현재 작업경로에 있는 경우만 가능
shutil.copytree('복사할 폴더명', '복사될 새로운 폴더명')

# 예시
shutil.copytree('테스트 폴더', '테스트 폴더2')
폴더를 복사할 때 주의할 점은 '복사될 새로운 폴더명'과 동일한 폴더명이 존재하면 아래와 같은 에러 메시지를 띄운다는 것입니다.

FileExistsError: [Errno 17] File exists: '테스트 폴더2'

간단히 말해서, '테스트 폴더2'는 코드가 실행될 때 존재해서는 안됩니다.

만약 원하시는 기능이 기존 존재하는 폴더 안에 특정 폴더를 복사해야 하는 것이라면 아래와 같이 하셔야 합니다.

shutil.copytree('테스트 폴더', '테스트 폴더2/새로운 폴더명')